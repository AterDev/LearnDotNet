# 编程语言通用概念：变量定义与基础类型

## 变量的定义

三要素：变量名称，变量类型，访问修饰符

- 变量名称：在作用范围内进行区分，不可重复。
- 变量类型：决定了变量可进行怎样的运算，以及辅助说明变量的含义。
- 访问修饰符：变量的使用范围，避免被滥用，或无预期的访问或更改。

写法：
`类型 变量名 = 初始值;`，如：

```csharp
int age = 18;
string name = "小明";
double money = 12.5;
Console.WriteLine($"{name} 今年 {age} 岁, 拥有 {money} 元");
```

我们也可以使用`var`去定义变量，编辑器会根据初始值推断类型，如:

```csharp
var age = 18;
var name = "小明";
var money = 12.5;
Console.WriteLine($"{name} 今年 {age} 岁, 拥有 {money} 元");
```

当然，初始值也不是必须的，我们可以先定义变量，后面再赋值。因为没有初始值，所以无法推断其类型，这种情况必须显示定义其类型，而不能使用`var`，如：

```csharp
int age;
string name;
double money;

age = 18;
name = "张三";
money = 12.5;
Console.WriteLine($"{name} 今年 {age} 岁, 拥有 {money} 元");
```

## 基础数据类型

类型用来定义和规范不同的数据类型(结构)，不同的结构决定了能够做执行怎么的运算。

> [!TIP]
> 同数学中的整数，小数，复数，矩阵等区分是一样的，不同的定义可执行不同的运算。

### 整型(整数)

| 关键词  | 原始类型名称  | 占用字节 | 取值范围                             |
|--------|---------------|----------|---------------------------------------|
| byte   | System.Byte   | 1        | 0 to 255                              |
| ushort | System.UInt16 | 2        | 0 to 65,535                           |
| uint   | System.UInt32 | 4        | 0 to 4,294,967,295                    |
| ulong  | System.UInt64 | 8        | 0 to 18,446,744,073,709,551,615       |
| short  | System.Int16  | 2        | -32,768 to 32,767                     |
| int    | System.Int32  | 4        | -2,147,483,648 to 2,147,483,647       |
| long   | System.Int64  | 8        | -9,223,372,036,854,775,808 to 9,223,372,036,854,775,807 |

### 浮点类型(小数)

| 关键词    | 原始类型名称  | 占用字节 | 精度         | 取值范围                                  |
|---------|---------------|----------|--------------|-------------------------------------------|
| float   | System.Single | 4        | 7位有效数字  | ±1.5 x 10^−45 to ±3.4 x 10^38             |
| double  | System.Double | 8        | 15-16位有效数字 | ±5.0 x 10^−324 to ±1.7 x 10^308          |
| decimal | System.Decimal| 16       | 28-29位有效数字 | ±1.0 x 10^−28 to ±7.9 x 10^28            |

以上内容，我们可能通过程序去验证，如:

```csharp
using System.Runtime.InteropServices;
byte a = 1;
Console.WriteLine($"类型: {a.GetType()}");
Console.WriteLine($"字节数: {Marshal.SizeOf(a)}");
Console.WriteLine($"取值范围: {byte.MinValue} ~ {byte.MaxValue}");
```

> [!NOTE]
> 对于浮点类型，由于精度的限制，它会有两个取值范围。

### 字符与字符串

除了进行数学运算，计算机还需要处理各种用户输入和现实中产生的数据，而这些数据很多都是以"文本"的形式存储和展现的，而这类数据都以`String`来表示。

文本是由多个字符(char)组成的，形成一串文本，在程序中硬编码的字符串，都是使用Unicode编码(16位)，故每个字符(char)固定占用2个字节。

字符的定义一定使用单引号，如:
`char splitChar=',';`

字符串的定义一定要使用双引号，如：
`string name="姓名";`

.NET平台提供了很多与字符串相关的处理方法，这个我们后续会详细说明。

> [!NOTE]
> 实际存储数据的文本或数据库，它们的未必使用Unicode编码，更常见的是UTF-8，不同的编码的字符占用的字节数不同。在实际处理编码字符串的时候，通常会转换成字节(byte)处理，而不是字符(char)。

### 日期时间类型

在现实世界中，人类创造时间的概念和表示形式，以更好的把物体运动的规律表示出来。我们可以将时间以数学的方式进行计算。

| 类型             | 默认值                           | 取值范围                                                 | 占用字节 |
|------------------|----------------------------------|----------------------------------------------------------|----------|
| DateOnly         | `DateOnly.MinValue` (0001-01-01) | 0001-01-01 到 9999-12-31                                  | 4        |
| TimeOnly         | `TimeOnly.MinValue` (00:00:00)   | 00:00:00.0000000 到 23:59:59.9999999                      | 4        |
| DateTime         | `DateTime.MinValue` (0001-01-01) | 0001-01-01T00:00:00.0000000 到 9999-12-31T23:59:59.9999999| 8        |
| DateTimeOffset   | `DateTimeOffset.MinValue` (0001-01-01T00:00:00+00:00) | 0001-01-01T00:00:00.0000000+00:00 到 9999-12-31T23:59:59.9999999+00:00 | 16       |
| TimeSpan         | `TimeSpan.Zero` (00:00:00)       | -10675199.02:48:05.4775808 到 10675199.02:48:05.4775807   | 8        |

### 结构类型

结构类型通常是指多个数据以不同结构组织起来的一种结构数据。这些数据通常是基础数据类型或字符，这里我们了解一些常见的结构即可。

- 枚举，指有限的一组常量，比如星期一到星期日。
- 链表(列表、队列、一维数组)，指的是一组数据(通常是相同类型)，以线性的方式表示出来，比如字符串。
- 字典，是一个键值对集合，键是唯一的。比如每个学生对应一个唯一的学号，通过学号去查找学生姓名。
- 树型结构，这是一种分层结构，像树一样可以分叉，有明确的父子节点。最常用的二叉树。
- 图，由多个节点和边组成。

> [!TIP]
> 还有很多不同的结构，比如二维数组用来做矩阵运算等。

一维数组是我们经常使用到的，它的定义方式如下：

```csharp
int[] arr = new int[5];// 定义一个长度为5的整型数组
var arr1 = new int[] { 1, 2, 3, 4, 5 }; // 数组初始化
int[] arr3 = [1, 2, 3, 4, 5]; // 最新写法
```

我们需要注意的是，数组的索引是从0开始的，它并不表示是第几个元素，而是元素在数组中的位置(偏移量)，因为数组是引用类型，变量指向的是数组第一次元素的地址，通过偏移量去访问数组中的元素。

`arr[1]`相当于数组第一个元素偏移1之后的元素，即第二个元素。

### 其他类型

在实际的编程过程中，我们可能还会用到`object`,`dynamic`,`tuple`等类型，这些类型都是为了满足特定的需求而设计的，后续遇到时会进行说明。

### 自定义类型

语言不可能把所有现实世界中的东西都抽象出来，只能提供最通用和常用的类型，以满足绝大部分的需求。对于自定义的需求，就可以通过面向对象的思维，自己定义类型。

面向对象的思维就是将现实事务和关系抽象成类的表现形式。

## 总结

### 类型与关键词

关键词是语言的保留内容，是属于语言的一部分，但是我们同时可以看到其会对应一个"原始类型"，C#只是语言，但其功能实现是基于.NET的，"原始类型"都是.NET平台提供的，一个平台统一类型，然后由不同语言去实现。

### 关于字节

通常我们会认为字节是计算机以及编程中处理的最小单位，表格中专门列出了各种类型占用的字节数。而字节数与二进制是直接相关的，一个字节等于8位二进制。

这意味着，无论什么的数据结构，最终我们都可以用字节的形式表示，并进行相应的转换。

> [!NOTE]
> 编程语言最小单位是字节，一个字节表示8位二进制，这是固定的约定，一个8位的二进制，可以表示256种可能，能够满足常用字母、数字、符号的表达。
> 为提高处理器的访问效率，现代计算机硬件和内存架构都是以字节为基本单位进行内存访问和管理的。
