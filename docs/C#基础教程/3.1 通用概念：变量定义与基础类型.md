# 编程语言通用概念：变量定义与基础类型

## 变量的定义与赋值

几个要素：变量名称，变量类型，访问修饰符，赋值符号

- 变量名称：在作用范围内进行区分，不可重复。
- 变量类型：决定了变量可进行怎样的运算，以及辅助说明变量的含义。
- 访问修饰符：变量的使用范围，避免被滥用，或无预期的访问或更改。
- 赋值符号通常为`=`，用来初始化(实例化)变量。

**其中类型信息与名称是必须的。**

写法：`类型 变量名 = 初始值;`，这是一种描述事物的方式，如：

- 电脑 MyPC 是 一台12700/2T/48G/3060ti 的组装电脑
- 理发师 Tony 是 一个高级男士理发师
- 猫猫 mimi 是 一只2岁的狸猫

那么在代码中，我们可以这样描述：

```csharp
int age = 18;
string name = "小明";
double money = 12.5;
Console.WriteLine($"{name} 今年 {age} 岁, 拥有 {money} 元");
```

我们也可以使用`var`去定义变量，编辑器会根据初始值推断类型，如:

```csharp
var age = 18;
var name = "小明";
var money = 12.5;
Console.WriteLine($"{name} 今年 {age} 岁, 拥有 {money} 元");
```

> [!NOTE]
> 当使用var定义变量时，初始值必不可少，否则编译器无法推断出具体类型。

我们可以先定义变量，后面再赋值。如：

```csharp
int age;
string name;
double money;

age = 18;
name = "张三";
money = 12.5;
Console.WriteLine($"{name} 今年 {age} 岁, 拥有 {money} 元");
```

> [!TIP]
> 如果需要先声明再赋值，则必须显式指定类型，而非使用var。

### ✨推荐写法

推荐在定义变量的时候就进行初始化，提高代码可读性和一致性，并减少空值错误。C#为初始化的变量提供了默认值，如：

```csharp
string str = string.Empty;
int number = int.MinValue;
string[] array = [];
AnyType variable = default;
```

## 基础数据类型

类型用来定义和规范不同的数据类型(结构)，不同的结构决定了能够做执行怎么的运算。对于常见的计算所需要的类型，编程语言通常都会提供支持，我们来了解一下这些类型。

### 整型(整数)

| 关键词  | 原始类型名称  | 占用字节 | 取值范围                             |
|--------|---------------|----------|---------------------------------------|
| byte   | System.Byte   | 1        | 0 to 255                              |
| ushort | System.UInt16 | 2        | 0 to 65,535                           |
| uint   | System.UInt32 | 4        | 0 to 4,294,967,295                    |
| ulong  | System.UInt64 | 8        | 0 to 18,446,744,073,709,551,615       |
| short  | System.Int16  | 2        | -32,768 to 32,767                     |
| int    | System.Int32  | 4        | -2,147,483,648 to 2,147,483,647       |
| long   | System.Int64  | 8        | -9,223,372,036,854,775,808 to 9,223,372,036,854,775,807 |

### 浮点类型(小数)

| 关键词    | 原始类型名称  | 占用字节 | 精度         | 取值范围                                  |
|---------|---------------|----------|--------------|-------------------------------------------|
| float   | System.Single | 4        | 7位有效数字  | ±1.5 x 10^−45 to ±3.4 x 10^38             |
| double  | System.Double | 8        | 15-16位有效数字 | ±5.0 x 10^−324 to ±1.7 x 10^308          |
| decimal | System.Decimal| 16       | 28-29位有效数字 | ±1.0 x 10^−28 to ±7.9 x 10^28            |

以上内容，我们可能通过程序去验证，如:

```csharp
using System.Runtime.InteropServices;
byte a = 1;
Console.WriteLine($"类型: {a.GetType()}");
Console.WriteLine($"字节数: {Marshal.SizeOf(a)}");
Console.WriteLine($"取值范围: {byte.MinValue} ~ {byte.MaxValue}");
```

> [!TIP]
> 🤔思考：为什么干脆不用一个类型来表示整型或浮点类型？比如Javascript就用Number来表示数字。

### 字符与字符串

除了进行数学运算，计算机还需要处理各种用户输入和现实中产生的数据，而这些数据很多都是以"**文本**"的形式存储和展现的，而这类数据以`String`类型来表示。

多个字符(char)组成字符串，字符串即是字符数组。

在C#中，字符与字符串的定义有明确的区分：

- 字符的定义必须使用单引号，单引号内只能包含一个字符，如：
`char splitChar=',';`
- 字符串的定义通常使用双引号，如：
`string name="姓名";`

.NET SDK提供了很多与字符串相关的处理方法，并涉及到`字符编码`相关的知识，这个我们后续会详细说明。

### 日期时间类型

在现实世界中，人类创造时间的概念和表示形式，以更好的把物体运动的规律表示出来。我们可以将时间以数学的方式进行计算。

| 类型             | 默认值                           | 取值范围                                                 | 占用字节 |
|------------------|----------------------------------|----------------------------------------------------------|----------|
| DateOnly         | `DateOnly.MinValue` (0001-01-01) | 0001-01-01 到 9999-12-31                                  | 4        |
| TimeOnly         | `TimeOnly.MinValue` (00:00:00)   | 00:00:00.0000000 到 23:59:59.9999999                      | 4        |
| DateTime         | `DateTime.MinValue` (0001-01-01) | 0001-01-01T00:00:00.0000000 到 9999-12-31T23:59:59.9999999| 8        |
| DateTimeOffset   | `DateTimeOffset.MinValue` (0001-01-01T00:00:00+00:00) | 0001-01-01T00:00:00.0000000+00:00 到 9999-12-31T23:59:59.9999999+00:00 | 16       |
| TimeSpan         | `TimeSpan.Zero` (00:00:00)       | -10675199.02:48:05.4775808 到 10675199.02:48:05.4775807   | 8        |

> [!TIP]
> 🤔思考：如何表示公元前的日期？

### 枚举类型

枚举指有限的一组常量，在C#中，枚举类型是一种值类型，用于定义命名的整型常量。如表示一周的星期：

```csharp
public enum Week
{
    Monday,
    Tuesday,
    Wednesday,
    Thursday,
    Friday,
    Saturday,
    Sunday
}
```

> [!NOTE]
> 枚举值默认以0开始，依次递增，也可以手动指定值。

### 集合

当你听到列表、队列、数组、链表等词语时，我们都可以把它们统称为集合(`Collection`)，即一组数据的集合。字符串也可以看作是字符的集合。在C#中，我们以后会用到各种类型的集合，最常见的`List`，相比数组，它提供了很多对集合的操作方法，使用起来非常方便，如:

```csharp
var list = new List<int> { 1, 2, 3, 4, 5 };
```

数组的定义如下：

```csharp
int[] arr = new int[5];// 定义一个长度为5的整型数组
var arr1 = new int[] { 1, 2, 3, 4, 5 }; // 数组初始化
int[] arr3 = [1, 2, 3, 4, 5]; // 这是C#的最新数组初始化写法，仅限于较新版本
```

> [!IMPORTANT]
> 需要注意的是，数组的索引是从0开始的，它并不表示是第几个元素，而是元素的偏移量，因为数组是引用类型，变量指向的是数组第一次元素的地址，通过偏移量去访问数组中的元素。

`arr[1]`相当于数组第一个元素偏移1之后的元素，即第二个元素。

### 字典集合

字典本身也是集合，它是一组键值对集合，其中键是唯一的。比如每个学生对应一个唯一的学号，通过学号去查找学生姓名，在C# 中，使用`Dictionary`来表示字典集合，如：

```csharp
var studentDict = new Dictionary<int, string> {
    { 1, "张三" },
    { 2, "李四" },
    { 3, "王五" }
};
```

> [!TIP]
> 还有很多不同的结构，如树型结构、图、拓扑、矩阵等，这些结构在实现某些算法时经常用到，需要开发者自己去定义。此外，在现实世界中，我们可能定义"无数"的类型，SDK会提供最常用的类型，后续的教程中，我们将学习如何定义自己的类型。

### 其他类型

在实际的编程过程中，我们可能还会用到`object`,`dynamic`,`tuple`等类型，这些类型都是为了满足特定的需求而设计的，感兴趣的同学可以先自行了解这些类型的作用。

### 自定义类型

语言不可能把所有现实世界中的东西都抽象出来，只能提供最通用和常用的类型，以满足绝大部分的需求。对于自定义的需求，就可以通过面向对象的思维，自己定义类型。

面向对象的思维就是将现实事务和关系抽象成类的表现形式。

## 总结

本节课程，都是围绕`变量`和`类型`这两个核心概念来展开的。变量其实就是命名，具有范围内的唯一性，否则就会引起冲突；而类型是对某类事实的抽象表达，是我们认知和表达事物的体现。

有些编程语言没有类型，或者是弱类型的，这就缺失了很重要的`类型信息`，从而导致很多不可预期的错误，同时代码的可读性大大降低，维护成本直线提高。想象一下，你面对一堆变量，却根本不知道它们表示的是什么，这是无法忍受的。

### 关于表格中提到的占用字节

字节是计算机以及编程中处理的最小单位，表格中专门列出了各种类型占用的字节数。

通常来说，占用字节越多的类型，能表示的信息(范围、精度)就越多，但同时也会占用更多的内存空间。在实际编程中，我们需要根据实际需求选择合适的类型，以节省内存空间，提高运算效率。

因为字节是编程语言是处理的最小单位，这意味着，无论什么的数据结构，最终我们都可以用字节的形式表示，并进行相应的转换。

> [!NOTE]
> 一个字节表示8位二进制，这是固定的约定，一个8位的二进制，可以表示256种可能，能够满足常用字母、数字、符号的表达。
> 为提高处理器的访问效率，现代计算机硬件和内存架构都是以字节为基本单位进行内存访问和管理的。

### 类型与关键词

关键词是语言的保留内容，是属于语言的一部分，表格中我们可以看到其会对应一个"原始类型"，它是以类型的方式表示的，由于历史原因，我们已经习惯用一些关键词来表示一些基础类型，这种习惯也延续了下来。
